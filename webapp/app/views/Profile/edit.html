#{extends 'main.html' /}
#{set title:_user.name +" Edit Profile" /}
#{set 'moreStyles'}
<link rel="stylesheet" media="screen" href="@{'/public/stylesheets/jquery-ui-1.8.17.custom.css'}">
#{/set}
#{set 'moreScripts'}
<script src="@{'/public/javascripts/lib/jquery-ui-1.8.17.custom.min.js'}" type="text/javascript" charset="${_response_encoding}"></script>
#{/set}
<h1>Edit Profile</h1>
<h3>Basic details</h3>
#{form @Profile.updateBasics()}
	<p>
        <label for="name">Name:</label>
        <input type="text" name="name" id="name" value="${_user.name}"/>
    </p>
    <p>
    <input class="btn btn-primary" type="submit" value="Save changes" />
    #{/form}

<h3>Upload a profile picture</h3>
<img width="100" height = "100" src="${_user.imageUrl}" />
#{form @Profile.uploadPicture(), enctype:'multipart/form-data'}
    <input type="file" class="input-file" name="picture.image" /><br/>
    <input class= "btn btn-primary" type="submit" name="submit" value="Upload picture" />
#{/form}

<h3>Instruments</h3>	
	<ul>
		#{ list items: _user.instruments, as:'instrument' } 
		<li>${instrument.name}</li>
		#{/list}
	</ul>	
#{form @Profile.addInstrument()}
    <p>
        <label for="name">Instrument name: </label>
        <input  id="instrument-add" type="text" name="name" id="name" />
    </p>
    <p>
        <input class= "btn btn-primary" type="submit" value="Add instrument" />
    </p>
#{/form}
<a href="/profile" >Done</a>
<style>
	.ui-autocomplete-loading { background: white url(@{'public/images/ui-anim_basic_16x16.gif'}) right center no-repeat; }
	</style>
<script>
	$(function() {		
		$( "#instrument-add" ).autocomplete({
			source: "/api/instruments",
			minLength: 2
		});
	});
	</script>